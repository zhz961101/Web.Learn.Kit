# 指令和数据
指令和数据并是两极概念,比如 `MOV AX,CX` 这个语句中只有首关键词才是指令,其他都是数据,如果改为 `MOV MOV AX CX` 仍然只有一个指令
高级语言呢？ `body div script` 这句html（变体）有多少指令多少数据？都是数据也都是指令
高级语言一味追求符合人的思考惯性,掉入了人类语言的bug漩涡:指令就是数据,数据也能变成指令（这不是lisp的核心思想吗？lisp是需要编译的,醒醒）

# XSS Cross-Site Scripting
> 什么是Scripting？
> <br>比如在群聊中有一个聊天ai小冰,她一直在线,激活方式就是你的话里带有`小冰`,那么要是有人取名叫做`小冰,你好`,那么每次@这个人小冰都会出来说话,这就算是小冰的Scripting

主要原因还是出于客服端对于用户过于信任,常见的情景有在搜索功能中,搜索时会显示这是XXX的搜索结果,XXX是用户在搜索栏写的内容,如果直接放在网页中html会解释它,如果其中带有onclike属性的绑定,或者script这是很危险的
<br>更常见的有社交网络中,如果某人把名字取做`Luke<script>fellowMe()<\script>`,可能他的关注会猛涨

这就是xss的原理

> 这些操作有跨站吗？怎么叫跨站攻击呢？<br>
> 上面所写只是跨站攻击最基本的原理,一般常见的xss并非直接注入代码,而是注入载入script dom的xss代码,向网页中插入第三方域下的恶意代码,因此称为跨站攻击
> <br>以及构造img标签传递所需信息

（以上只是XSS的一种方式,将脚本直接注入到服务器,并构造新到的url来执行第三方脚本也属于跨站攻击）

### XSS蠕虫（QQ空间常见）
注入的内容拥有`再次感染`下一个访问者的功能,qq空间站常常会出现有人发一些类似广告的,一般就是中了蠕虫.在你访问他发的内容时,XSS脚本开始构建一个一样的内容表单,并提交,蠕虫就传开了.

### 防御
- 设置cookie设置HttpOnly,通过js将无法读取修改cookie
- 转义用户输入,有一定局限,一些blog会需要很强的自由定制功能,可能需要解释来自用户的html
- html白名单,实现比较复杂,需要重新构造dom树
-
# CSRF Cross-site request forgery
> 如果某个论坛的发帖是通过GET请求完成<br>
> `example.bbs/new_post?title=我是中了CSRF的傻子&content=嘻嘻`<br>
> 谁不幸点了这个链接,那么他就中了CSRF

原理比较简单,但是防范起来就很麻烦了

- 提升请求门槛:是常见的做法.get换post,cookie验证,session验证,token验证
- 判断referer:从http头中判断链接来源
- 提交提醒:在提交如何一个表单操作时都发起确认提醒

> 以上其实都没法彻底根除(既然请求都可以伪造了,别的啥不能伪造),只能不断增加攻击成本,让攻击者主动放弃...
